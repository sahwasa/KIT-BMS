@@include('../../inc/layout/top.html')
<div id="wrap" class="wrap">
  @@include('../../inc/layout/header.html')
  @@include('../../inc/layout/nav.html')
  <main id="content" class="container">
    @@include('../../inc/snb/projectList.html')
    <section class="contents">
      @@include('../../inc/snb/snb_fold.html')
      <header class="cont_tit">
        <h1>도시폭염을 고려한 폭염저감기술 최적화 (2023 도시폭염)<span>프로젝트</span></h1>
        <section class="bredcrumb">
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">프로젝트</a></li>
            <li>프로젝트 상세</li>
          </ul>
        </section>
      </header>
      <div class="cont_body proj_view">
        <div class="box_compact">
          <h2>프로젝트 ID : P20220000</h2>
          <ul class="proj_summary">
            <li><em>업무구분</em>용역</li>
            <li><em>발주기관</em>행정안전부</li>
            <li><em>수행PM</em>홍OO (개발 1팀)</li>
            <li><em>수행기간</em>2022-04-01 ~ 2023-03-31</li>
          </ul>
        </div>
        <div class="tab_wrap">
          <ul class="tab">
            <li><a href="#proj01">이슈</a></li>
            <li><a href="#proj01-1">이슈추가</a></li>
            <li><a href="#proj02">개요</a></li>
            <li><a href="#proj03">요구사항</a></li>
            <li><a href="#proj04">WBS(단계일정)</a></li>
            <li><a href="#proj05">리스크관리</a></li>
            <li><a href="#proj06">문서관리</a></li>
          </ul>
        </div>
        <div class="tab_container">
          <section id="proj01" class="tab_contents issue">
            @@include('porject_view_issue.html')
          </section>
          <section id="proj01-1" class="tab_contents issue">
            @@include('porject_view_issue_write.html')
          </section>
          <section id="proj02" class="tab_contents overview">
            @@include('porject_view_overview.html')
          </section>
          <section id="proj03" class="tab_contents rfp">
            @@include('project_view_rfp.html')
          </section>
          <section id="proj04" class="tab_contents wbs">
            @@include('porject_view_wbs.html')
          </section>
          <section id="proj05" class="tab_contents risk">
            @@include('project_view_risk.html')
          </section>
          <section id="proj06" class="tab_contents doc">
            @@include('project_view_doc.html')
          </section>
        </div>
      </div>
    </section>
  </main>
  @@include('../../inc/layout/footer.html')
</div>
@@include('../../inc/layout/script.html')
p_projDoc.html
<!-- tui.chart API : https://github.com/nhn/tui.chart/blob/main/docs/ko/getting-started.md -->
<link rel="stylesheet" href="../../plugins/chart/dist/toastui-chart.min.css" >
<script src="../../plugins/chart/dist/toastui-chart.min.js"></script>
<script src="../../js/proj_chart.js"></script>
<script src='../../plugins/fullcalendar-scheduler/index.global.min.js'></script>
<script src="../../js/wbs.js"></script>
<script>
  $(function () {
    setEditor();
    fileDropEvt();
    $('.btn_request').on('click', function () { $('.file_upload').show(); })
    $('.file_upload').on('click', function () { $(this).hide(); })
    const initialNames = ['개발', '장애처리', '디자인', '회의', '업무지원', '연구활동', '기타'];
    initializeTagManager('tagsList', 'nameSelect', initialNames);

     // 이슈 > 업무상태
    $('.task_status_multi').on('click','.all_label',function(){
      $(this).parents('.task_status_multi').find('.taskstatus_layer').toggleClass('on');
    });
    $('html').click(function(e){
      const target = $(e.target);
      if(target.parents('.taskstatus_layer').length < 1 && !(target.hasClass('all_label'))){
        $('.taskstatus_layer').removeClass('on');
      }
    });
    const lst_item = $('.user_lst dd');
    $('.taskstatus_layer .tit').on('click','.optionItem',function(e){
      const item = $(this);
      const target = item.closest('.task_status_multi').find('.label');
      handleMultiSelect(item,[target])
    })
    lst_item.on('click','.optionItem',function(e){
      const item = $(this);
      const target1 = item.closest('.task_status_multi').find('.all_label');
      const target2 = item.closest('.taskstatus_layer').find('.tit').find('.label');     
      handleMultiSelect(item,[target1,target2])
    })
    const handleMultiSelect = function(item,target){
      const itemVal = $(item).data('value');
      target.forEach(element => {      
        element.html($(item).html()).attr('data-value', itemVal);        
      });
    }   
  })
  var tribute = new Tribute({
    trigger: "@",
    values: [
      { key: "1", value: "김개발" },
      { key: "2", value: "김연구 연구기획 1팀" }
    ],
    selectTemplate: function (item) {
      return `<span contenteditable="false"><a title="${item.original.key}">@${item.original.value}</a></span>&nbsp;`;
    },
    menuItemTemplate: function (item) {
      return `${item.original.value}`;
    }   
  });
  tribute.attach(document.querySelectorAll(".editable"));

  // 리스크 유형 선택
  const initialNamesR = ['인력', '비용', '일정', '계약', '품질', '기타'];
  initializeTagManager('tagListR', 'nameSelectR', initialNamesR);

</script>
</body>

</html>